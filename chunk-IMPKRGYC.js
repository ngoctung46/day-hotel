import{a as K,b as E,c as y,d as Q,e as X,g as Z}from"./chunk-4YUIU3BO.js";import{a as te}from"./chunk-FVP4ZNBQ.js";import{a as G,b as ee}from"./chunk-4RXUG7LP.js";import{d as H,g as Y,h as $,j as q,k as J,l as U,t as z}from"./chunk-QZCFPOZ3.js";import{Ab as f,Bb as F,Cb as R,Db as k,Eb as P,Ga as l,Jb as s,Kb as p,La as _,Qa as B,Va as O,Y as I,ab as L,c as S,ca as b,eb as C,gb as T,hb as w,hc as V,ia as g,ib as i,ja as h,jb as r,ka as v,lc as j,mc as W,nb as A,pb as x,qb as M,xb as N,yb as o,zb as c}from"./chunk-N2SH4PON.js";var D=class a extends y{DELIMITER="/";parse(n){if(n){let e=n.split(this.DELIMITER);return{day:parseInt(e[0],10),month:parseInt(e[1],10),year:parseInt(e[2],10)}}return null}format(n){return n?n.day+this.DELIMITER+n.month+this.DELIMITER+n.year:""}static \u0275fac=(()=>{let n;return function(t){return(n||(n=v(a)))(t||a)}})();static \u0275prov=I({token:a,factory:a.\u0275fac})},ie=class a extends E{DELIMITER="/";fromModel(n){if(n){let e=n.split(this.DELIMITER);return{day:parseInt(e[0],10),month:parseInt(e[1],10),year:parseInt(e[2],10)}}return null}toModel(n){return n?n.day+this.DELIMITER+n.month+this.DELIMITER+n.year:null}static \u0275fac=(()=>{let n;return function(t){return(n||(n=v(a)))(t||a)}})();static \u0275prov=I({token:a,factory:a.\u0275fac})};function oe(a,n){if(a&1&&(i(0,"tr")(1,"td"),o(2),r(),i(3,"td"),o(4),r(),i(5,"td"),o(6),s(7,"number"),r(),i(8,"td"),o(9),s(10,"number"),r(),i(11,"th"),o(12),s(13,"number"),r()()),a&2){let e=n.$implicit,t=n.$index;l(2),c(t+1),l(2),c(e.product==null?null:e.product.name),l(2),c(p(7,5,e.product==null?null:e.product.price)),l(3),c(p(10,7,e.quantity)),l(3),c(p(13,9,e.total))}}function ae(a,n){if(a&1&&(i(0,"tr")(1,"th",24),o(2),r(),i(3,"th",18),o(4),r(),i(5,"td",18)(6,"div",14)(7,"table",25)(8,"thead")(9,"tr")(10,"th"),o(11,"STT"),r(),i(12,"th"),o(13,"T\xEAn"),r(),i(14,"th"),o(15,"Gi\xE1"),r(),i(16,"th"),o(17,"S\u1ED1 l\u01B0\u1EE3ng"),r(),i(18,"th"),o(19,"Th\xE0nh ti\u1EC1n"),r()()(),i(20,"tbody"),T(21,oe,14,11,"tr",null,C),r()()()(),i(23,"th",26),o(24),s(25,"number"),r(),i(26,"th",27),o(27),s(28,"number"),r(),i(29,"th",28),o(30),s(31,"number"),r(),i(32,"th",23),o(33),s(34,"number"),r()()),a&2){let e,t=n.$implicit,d=n.$index,u=M(2);l(2),c(d+1),l(2),c(u.getRoomNumber(t.roomId)),l(17),w(t.orderLines),l(3),f(" ",p(25,6,t.total)," "),l(3),f(" ",p(28,8,t.charges)," "),l(3),f(" ",p(31,10,t.discount)," "),l(3),f(" ",p(34,12,((e=t==null?null:t.total)!==null&&e!==void 0?e:0)+((e=t==null?null:t.charges)!==null&&e!==void 0?e:0)-((e=t==null?null:t.discount)!==null&&e!==void 0?e:0))," ")}}function le(a,n){if(a&1&&(i(0,"div",14)(1,"table",15)(2,"thead")(3,"tr",16)(4,"th",17),o(5,"STT"),r(),i(6,"th",17),o(7,"Ph\xF2ng"),r(),i(8,"th",18),o(9,"H\xF3a \u0111\u01A1n"),r(),i(10,"th",17),o(11,"T\u1ED5ng"),r(),i(12,"th",19),o(13,"Ph\u1EE5 thu"),r(),i(14,"th",20),o(15,"Gi\u1EA3m gi\xE1"),r(),i(16,"th",21),o(17,"Th\u1EF1c thu"),r()()(),i(18,"tbody"),T(19,ae,35,14,"tr",null,C),i(21,"tr")(22,"th",22),o(23,"T\u1ED5ng"),r(),i(24,"th",23),o(25),s(26,"number"),r(),i(27,"th",23),o(28),s(29,"number"),r(),i(30,"th",23),o(31),s(32,"number"),r(),i(33,"th",23),o(34),s(35,"number"),r()()()()()),a&2){let e=M();l(19),w(e.filteredOrders),l(6),c(p(26,4,e.total)),l(3),c(p(29,6,e.charges)),l(3),c(p(32,8,e.discount)),l(3),f(" ",p(35,10,e.total+e.charges-e.discount)," ")}}var ne=class a{constructor(n,e){this.ngbCalendar=n;this.dateAdapter=e;let t=new Date(Date.now()),d=new Date;d.setDate(t.getDate()+1),this.fromDate={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()},this.toDate={year:d.getFullYear(),month:d.getMonth()+1,day:d.getDate()}}orderService=b(ee);orderLineService=b(te);roomService=b(G);fromDate;toDate;fromTime={hour:13,minute:30};toTime={hour:23,minute:59};orders=[];filteredOrders=[];rooms=[];total=0;charges=0;discount=0;ngOnInit(){return S(this,null,function*(){yield this.orderService.getItems().then(n=>this.orders=n),yield this.roomService.getItems().then(n=>this.rooms=n)})}get today(){return this.dateAdapter.toModel(this.ngbCalendar.getToday())}search(){let n=new Date(this.fromDate.year,this.fromDate.month-1,this.fromDate.day,0,0,0),e=new Date(this.toDate.year,this.toDate.month-1,this.toDate.day,23,59,59);this.filteredOrders=this.orders.filter(t=>new Date(t?.checkOutTime)>=n&&new Date(t?.checkOutTime)<=e),this.filteredOrders.forEach(t=>S(this,null,function*(){this.total+=t.total??0,this.charges+=t.charges??0,this.discount+=t.discount??0,yield this.orderLineService.getItems().then(d=>{let u=d.filter(m=>m.orderId==t.id);t.orderLines=u})}))}getRoomNumber(n){return(this.rooms.find(t=>t.id==n)??{}).number??""}static \u0275fac=function(e){return new(e||a)(_(K),_(E))};static \u0275cmp=B({type:a,selectors:[["app-reports"]],features:[P([{provide:y,useClass:D}])],decls:26,vars:3,consts:[["c1","ngModel","d1","ngbDatepicker"],["c2","ngModel","d2","ngbDatepicker"],[1,"text-success","text-center"],[1,"justify-content-center","d-flex"],[1,"row","g-3","row-cols-sm-auto"],[1,"col-auto"],["for","fromDate",1,"form-label"],[1,"input-group"],["placeholder","dd/mm/yyyy","name","d1","ngbDatepicker","",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-outline-secondary","bi","bi-calendar3",3,"click"],["for","toDate",1,"form-label"],["placeholder","dd/mm/yyyy","name","d2","ngbDatepicker","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","bi","bi-search","mb-3","form-control",3,"click"],["class","table-responsive d-flex justify-content-center align-middle",4,"ngIf"],[1,"table-responsive","d-flex","justify-content-center","align-middle"],[1,"table","table-bordered","w-auto","rounded-2","align-middle","border-warning"],[1,"table-danger"],["scope","col",1,"text-center"],[1,"text-center"],["scope","col",1,"text-center","text-primary"],["scope","col",1,"text-center","text-info"],["scope","col",1,"text-center","text-danger"],["colspan","3",1,"text-end"],[1,"text-end","text-danger"],["scope","row",1,"text-center"],[1,"table-sm","table-striped","table-bordered","border-danger"],[1,"text-end"],[1,"text-end","text-primary"],[1,"text-end","text-info"]],template:function(e,t){if(e&1){let d=A();i(0,"h4",2),o(1,"B\xC1O C\xC1O DOANH THU"),r(),i(2,"div",3)(3,"form",4)(4,"div",5)(5,"label",6),o(6,"T\u1EEB ng\xE0y"),r(),i(7,"div",7)(8,"input",8,0),k("ngModelChange",function(m){return g(d),R(t.fromDate,m)||(t.fromDate=m),h(m)}),r(),i(11,"button",9),x("click",function(){g(d);let m=N(10);return h(m.toggle())}),r()()(),i(12,"div",5)(13,"label",10),o(14,"\u0110\u1EBFn ng\xE0y"),r(),i(15,"div",7)(16,"input",11,1),k("ngModelChange",function(m){return g(d),R(t.toDate,m)||(t.toDate=m),h(m)}),r(),i(19,"button",9),x("click",function(){g(d);let m=N(18);return h(m.toggle())}),r()()(),i(20,"div",5)(21,"label",10),o(22,"T\xECm ki\u1EBFm"),r(),i(23,"div",7)(24,"button",12),x("click",function(){return g(d),h(t.search())}),r()()()()(),O(25,le,36,12,"div",13)}e&2&&(l(8),F("ngModel",t.fromDate),l(8),F("ngModel",t.toDate),l(9),L("ngIf",t.filteredOrders.length>0))},dependencies:[X,Q,z,U,H,Y,$,J,q,Z,W,V,j],encapsulation:2})};export{ne as ReportsComponent};
